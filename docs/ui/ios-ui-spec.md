# 房间对局模块：iOS 审美 UI 组件清单 / 页面原型要点 / 动效规范
文档版本：v0.1.0  
关联应用版本：ttg-chat v1.0.0  
最后更新：2026-02-08  
范围：GameRoom / GamePlay（含语音、局内聊天、状态与错误提示）

---

## 1. 视觉基调（iOS 审美基线）
- 形态：大圆角、层级清晰、轻量边框、半透明玻璃质感。
- 色彩：以单一主色（建议 iOS 蓝 #0A84FF）驱动关键按钮；错误红 #FF453A；成功绿 #30D158；警告橙 #FF9F0A。
- 文本：系统字体优先（SF Pro 系列）；层级通过字号 + 字重 + 透明度拉开，而非滥用颜色。
- 触控：所有关键控件的可点击区域≥44pt。

---

## 2. UI 组件清单（测试视角）
### 2.1 导航与页面骨架
- 顶部导航条（Top Bar）：返回按钮 + 标题 + 次要信息（房间名/状态）
- 页面容器：背景渐变/磨砂层；内容区可滚动；底部保留安全区

### 2.2 房间页（GameRoom）
- 房间信息卡（Room Info Card）
  - 房间名、room_code、玩法名、人数/上限、状态 pill（等待中/游戏中）
- 玩家列表（Player List）
  - 玩家项：头像占位 + 昵称 + 房主标识 + 在线/离线 + 准备态 badge
- 操作区（Action Panel）
  - 主要按钮：开始游戏（仅房主可用）
  - 次要按钮：进入对局页（仅 playing 可用）、离开房间（始终可用）
- 语音卡（Voice Panel）
  - 加入/退出语音、静音/取消静音、参与人数
- 房间聊天（Room Chat）
  - 消息列表（可滚动、自动滚到底部）、输入框、发送按钮
- 状态快照与事件流（Debug Panels）
  - JSON 快照、最近事件列表（用于测试定位与回归对比）

### 2.3 对局页（GamePlay）
- 对局头部信息
  - 当前回合玩家、阶段（德州）、奖池与当前注额（扑克）
- 动作区（Action Bar）
  - 手牌相关：看牌/弃牌/跟注/加注/比牌（按游戏类型显示）
  - 棋类相关：落子（点击棋盘）、认输
- 视觉承载
  - 五子棋棋盘（15x15）
  - 扑克公共牌区（德州）/ 三张牌展示（炸金花）
- 结算弹层（Result Sheet）
  - winnerId、每位玩家净输赢、回到房间/再来一局提示

### 2.4 通用反馈组件
- Toast：成功/失败/提示（错误优先用 toast + 可重复读的文案）
- Skeleton：列表/房间信息加载占位
- Empty State：无消息/无玩家时的空态
- Error State：game:error、网络断开、权限不足、筹码不足
- Modal/Bottom Sheet：借贷、确认离开、结算、设置等

---

## 3. 页面原型要点（信息架构）
### 3.1 GameRoom（等待态）
1. 顶部：返回 + 标题（游戏房间）+ 房间名
2. 主卡：房间信息（玩法/人数/状态）+ 玩家列表
3. 操作：准备（非房主且 waiting）、开始游戏（房主且 waiting 且满足条件）
4. 辅助：语音卡、聊天卡、状态快照/事件流（可折叠，避免影响正式体验）

### 3.2 GameRoom（游戏中）
- 保留“进入对局页”按钮为主入口；准备按钮隐藏/禁用。
- 状态 pill 强制为“游戏中”，避免用户误以为可重新开始。

### 3.3 GamePlay（对局中）
- 顶部状态固定可见（当前回合/阶段/奖池）
- 核心交互区占最大面积（棋盘或牌面）
- 动作区固定在底部安全区上方，避免误触 Home 条

---

## 4. 动效规范（Motion Spec，测试可量化）
### 4.1 时长与曲线
- 轻交互（按钮按下、选中态）：120–180ms，ease-out
- Toast/提示：出现 220ms，停留 1.5–2.5s，消失 220ms
- 弹层/Bottom Sheet：280–360ms，ease-out；关闭 220–280ms
- 列表项插入/删除：180–240ms，避免位移过大

### 4.2 状态同步动效（与 Socket 事件绑定）
- game:state_update：仅对“增量变化”做轻量高亮（例如下注数值闪烁 120ms），避免每次全局重排。
- game:player_bet：筹码扣除动画与数值变更必须一致（建议先扣数值后动效，或动效结束再锁定数值，但要统一）。
- game:finished：先展示结果弹层，再允许返回房间；避免 UI 提前回跳导致用户误解结算。

### 4.3 弱网/断网体验
- 断网：顶端或弹层提示“离线”，动作按钮进入禁用态，给出“重连中/重试”入口。
- 重连成功：toast 提示“已恢复连接”，并刷新一次状态快照；不得出现“回合倒退”视觉。
