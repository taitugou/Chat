## 修复计划

### 1. 修复积分记录API参数处理问题

* **文件**：`f:\C\backend\routes\points.js`

* **问题**：第62行和第67行的参数处理存在类型不匹配问题，导致SQL执行错误

* **修复**：确保所有参数类型正确，特别是在查询总记录数时统一使用正确的参数数组

### 2. 修复consumePoints函数调用参数不匹配

* **文件**：`f:\C\backend\routes\documents.js`

* **问题**：第227行和第265行调用consumePoints函数时传递了5个参数，但函数定义只接受4个参数

* **修复**：移除多余的参数，确保函数调用与定义一致

### 3. 验证文档列表API参数处理

* **文件**：`f:\C\backend\routes\documents.js`

* **检查**：确保所有API端点的参数处理正确，特别是limit和offset的类型转换

### 4. 重启前后端服务

* **目的**：确保所有修改生效，验证问题是否解决

## 预期结果

* 积分记录API能够正常返回数据

* 资料列表API能够正常获取数据

* 文档上传功能正常工作

* /documents/my页面能够显示用户自己的文档

